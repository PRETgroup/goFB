// This file has been automatically generated by go-iec61499 and should not be edited by hand
// Converter written by Hammond Pearce and available at github.com/kiwih/go-iec61499

// This file represents the implementation of the Basic Function Block for CanisterCounter
#include "CanisterCounter.h"

enum CanisterCounter_states { STATE_Start }

void CanisterCounter_init(struct CanisterCounter *me) {
	//if there are output events, reset them
	me->outputEvents.CanisterCountChanged[0] = 0;
	me->outputEvents->CanisterCountChanged[1] = 0;
	
	//if there are output vars, reset them
	me->outputVars.CanisterCount = 0;
	
	//if there are internal vars, reset them
	
}

void CanisterCounter_run(struct CanisterCounter *me) {
	//current state storage
	static enum CanisterCounter_states state = STATE_Start;

	//now, let's advance state
	switch(state) {
	case STATE_Start :
		if(me->inputEvents.LasersChanged) {
			state = STATE_Start;
		};
	
	}
}

//algorithms

void CanisterCounter_ChangeCount(struct CanisterCounter *me) {
if DoorSiteLaser='1' then 
	CanisterCount <= CanisterCount + 1;
end if;
if RejectBinLaser = '1' or AcceptBinLaser = '1' then 
CanisterCount <= CanisterCount - 1;
end if;
DONE<='1';
}



