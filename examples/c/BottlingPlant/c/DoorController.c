// This file has been automatically generated by go-iec61499 and should not be edited by hand
// Converter written by Hammond Pearce and available at github.com/kiwih/go-iec61499

// This file represents the implementation of the Basic Function Block for DoorController
#include "DoorController.h"

enum DoorController_states { STATE_E_Stop, STATE_Run, STATE_Await }

void DoorController_init(struct DoorController *me) {
	//if there are output events, reset them
	me->outputEvents.DoorReleaseCanister[0] = 0;
	me->outputEvents->DoorReleaseCanister[1] = 0;
	
	//if there are output vars, reset them
	
	//if there are internal vars, reset them
	
}

void DoorController_run(struct DoorController *me) {
	//current state storage
	static enum DoorController_states state = STATE_E_Stop;

	//now, let's advance state
	switch(state) {
	case STATE_E_Stop :
		if(me->inputEvents.EmergencyStopChanged AND (!me->inputVars.EmergencyStop)) {
			state = STATE_Await;
		};
	case STATE_Run :
		if(me->inputEvents.EmergencyStopChanged AND (me->inputVars.EmergencyStop)) {
			state = STATE_E_Stop;
		} else if(me->inputEvents.ReleaseDoorOverride OR me->inputEvents.BottlingDone) {
			state = STATE_Run;
		};
	case STATE_Await :
		if(me->inputEvents.ReleaseDoorOverride OR me->inputEvents.BottlingDone) {
			state = STATE_Run;
		};
	
	}
}

//no algorithms were present for this function block


