// This file has been automatically generated by goFB
// Compiler written by Hammond Pearce and available at github.com/kiwih/goFB

//This is the main file for the iec61499 network with topFLAT as the top level block

#include "topFLAT.h"

//put a copy of the top level block into global memory
topFLAT_t mytopFLAT;

int main() {
	if(topFLAT_preinit(&mytopFLAT) != 0) {
		printf("Failed to preinitialize.");
		return 1;
	}
	if(topFLAT_init(&mytopFLAT) != 0) {
		printf("Failed to initialize.");
		return 1;
	}

	printf("Top: %20s   Size: %lu\n", "topFLAT", sizeof(mytopFLAT));

	int tickNum = 0;
	do {
		//printf("=====TICK %i=====\n",tickNum);
		topFLAT_syncOutputEvents(&mytopFLAT);
		topFLAT_syncInputEvents(&mytopFLAT);

		topFLAT_syncOutputData(&mytopFLAT);
		topFLAT_syncInputData(&mytopFLAT);
		
		topFLAT_run(&mytopFLAT);
	} while(tickNum++ < 500);

	return 0;
}

