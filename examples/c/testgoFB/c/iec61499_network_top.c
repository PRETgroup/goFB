// This file has been automatically generated by goFB
// Compiler written by Hammond Pearce and available at github.com/kiwih/goFB

//This is the main file for the iec61499 network with topCFB1 as the top level block

#include "topCFB1.h"

//put a copy of the top level block into global memory
topCFB1_t mytopCFB1;

int main() {
	if(topCFB1_preinit(&mytopCFB1) != 0) {
		printf("Failed to preinitialize.");
		return 1;
	}
	if(topCFB1_init(&mytopCFB1) != 0) {
		printf("Failed to initialize.");
		return 1;
	}
	int tickNum = 0;
	do {
		printf("=====TICK %i=====\n",tickNum);
		topCFB1_syncOutputEvents(&mytopCFB1);
		topCFB1_syncInputEvents(&mytopCFB1);

		topCFB1_syncOutputData(&mytopCFB1);
		topCFB1_syncInputData(&mytopCFB1);
		
		topCFB1_run(&mytopCFB1);
	} while(tickNum++ < 100);

	return 0;
}

