// This file is generated by FBC.

#include "_Core.h"
#include <string.h>
#include <stdio.h>

/* Function block initialization function */
void _Coreinit(_Core* me)
{
    PIDinit(&me->pid);
    Managerinit(&me->manager);
    Plantinit(&me->plant);
    me->pid._PGain = 0.4;
    me->pid._WindupGuard = 1.0;
    me->pid._DGain = 0.5;
    me->pid._IGain = 0.05;
    me->manager._TicksPerVal = 100;
}

/* Function block execution function */
void _Corerun(_Core* me)
{
    me->pid._ActualValue = me->plant._Value;
    me->pid._input.event.Zero = me->manager._output.event.Zero;
    me->pid._DesiredValue = me->manager._DesiredValue;
    me->pid._input.event.ActualValueChanged = me->plant._output.event.ValueChange;
    me->pid._input.event.Tick = me->manager._output.event.Tick;
    me->manager._ActualValue = me->plant._Value;
    me->manager._input.event.ActualValueChanged = me->plant._output.event.ValueChange;
    me->plant._input.event.ControlChange = me->pid._output.event.ControlChanged;
    me->plant._Control = me->pid._Control;
    me->plant._input.event.Zero = me->manager._output.event.Zero;
    
    PIDrun(&me->pid);
    Managerrun(&me->manager);
    Plantrun(&me->plant);
    
}
