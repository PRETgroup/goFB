// This file has been automatically generated by goFB
// Compiler written by Hammond Pearce and available at github.com/kiwih/goFB

//This is the main file for the iec61499 network with _WaterHeaterPlantAndController as the top level block

#include "_WaterHeaterPlantAndController.h"

//put a copy of the top level block into global memory
_WaterHeaterPlantAndController_t my_WaterHeaterPlantAndController;

int main() {
	printf("\n\n\n");

	if(_WaterHeaterPlantAndController_preinit(&my_WaterHeaterPlantAndController) != 0) {
		printf("Failed to preinitialize.");
		return 1;
	}
	if(_WaterHeaterPlantAndController_init(&my_WaterHeaterPlantAndController) != 0) {
		printf("Failed to initialize.");
		return 1;
	}

	printf("Top: %20s   Size: %lu\n", "_WaterHeaterPlantAndController", sizeof(my_WaterHeaterPlantAndController));

	int tickNum = 0;
	do {
		printf("%i,",tickNum);
		_WaterHeaterPlantAndController_syncOutputEvents(&my_WaterHeaterPlantAndController);
		_WaterHeaterPlantAndController_syncInputEvents(&my_WaterHeaterPlantAndController);

		_WaterHeaterPlantAndController_syncOutputData(&my_WaterHeaterPlantAndController);
		_WaterHeaterPlantAndController_syncInputData(&my_WaterHeaterPlantAndController);
		
		_WaterHeaterPlantAndController_run(&my_WaterHeaterPlantAndController);
		printf("\n");
	} while(tickNum++ < 200);

	return 0;
}

